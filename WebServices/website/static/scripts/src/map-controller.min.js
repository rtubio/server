var DEFAULT_LAT=42.6;var DEFAULT_LNG=-8.933;var DEFAULT_ZOOM=12;var USER_ZOOM=6;function centerMap(d,c,a,b){d.setView(new L.LatLng(c,a),b)}function locateUser(a,b){$.get("http://ipinfo.io",function(c){var d=c.loc.split(",");a.info("User located at = "+d);centerMap(b,d[0],d[1],USER_ZOOM)},"jsonp").fail(function(){a.warn("Could not locate user");centerMap(b,DEFAULT_LAT,DEFAULT_LNG,DEFAULT_ZOOM)})}var app=angular.module("satellite.tracker.js",["leaflet-directive"]);app.config(function(a){a.decorator("$log",function(b,c){return c(b)})});app.factory("logExtension",function(){return function(a){return{log:function(){console.log("[log] "+arguments[0])},info:function(){console.info("[info] "+arguments[0])},error:function(){console.error("[error] "+arguments[0])},warn:function(){console.warn("[warning] "+arguments[0])}}}});app.controller("MapController",["$scope","$log","$http","leafletData",function(b,c,d,a){angular.extend(b,{center:{lat:DEFAULT_LAT,lng:DEFAULT_LNG,zoom:DEFAULT_ZOOM}});a.getMap().then(function(e){locateUser(c,e)});b.init=function(){b._simulator=new Simulator(c,d)}}]);