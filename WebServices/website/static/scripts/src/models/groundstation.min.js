angular.module("groundstation-models",["satnet-services"]);angular.module("groundstation-models").service("gs",["$rootScope","$log",function(a,b){this._gsCfg={};this.create=function(f){var d=f.groundstation_id;if(d in this._gsCfg){b.warn("[markers] Marker exists, id = "+d)}var g=L.latLng(f.groundstation_latlon[0],f.groundstation_latlon[1]);var e=L.icon({iconUrl:"/static/images/icons/gs-icon.svg",iconSize:[30,30]});var c=L.marker(g,{draggable:false,icon:e}).bindLabel(d,{noHide:true});this._gsCfg[d]={marker:c,cfg:f};return c};this.remove=function(c){if(!c in this._gsCfg){b.warn("[markers] No marker for gs, id= "+c);return}a._map.removeLayer(this._gsCfg[c]["marker"]);delete this._gsCfg[c]};this._latlngDirtyUpdate=function(d,g){var i=false;var j=g.groundstation_latlon[0];var c=g.groundstation_latlon[1];var e=this._gsCfg[d].cfg.groundstation_latlon[0];var f=this._gsCfg[d].cfg.groundstation_latlon[1];if(j!=e){i=true}if(c!=f){i=true}if(i==true){var h=L.latLng(j,c);this._gsCfg[d].cfg.groundstation_latlon[0]=j;this._gsCfg[d].cfg.groundstation_latlon[1]=c;this._gsCfg[d].marker.setLatLng(h)}};this.configure=function(d){var c=d.groundstation_id;if(!c in this._gsCfg){b.warn("[markers] No marker for gs, id= "+c);return}this._gsCfg[c].cfg.groundstation_callsign=d.groundstation_callsign;this._gsCfg[c].cfg.groundstation_elevation=d.groundstation_elevation;this._latlngDirtyUpdate(c,d)}}]);