var DEFAULT_LAT=42.6;var DEFAULT_LNG=-8.933;var DEFAULT_ZOOM=6;var DEFAULT_GS_ELEVATION=15;var USER_ZOOM=8;var TIMESTAMP_FORMAT="HH:mm:ss.sss";function centerMap(d,c,a,b){d.setView(new L.LatLng(c,a),b)}function locateUser(b,c,a){$.get("http://ipinfo.io",function(e){var g=e.loc.split(",");var f=parseFloat(g[0]);var d=parseFloat(g[1]);b.info("[map-ctrl] User located at = "+g);centerMap(c,f,d,USER_ZOOM);if(a!=null){a.lat=f;a.lng=d}},"jsonp").fail(function(){b.warn("[map-ctrl] Could not locate user");centerMap(c,DEFAULT_LAT,DEFAULT_LNG,DEFAULT_ZOOM);if(a!=null){a.lat=DEFAULT_LAT;a.lng=DEFAULT_LNG}})}var app=angular.module("satnet-ui",["leaflet-directive","ngResource","ngCookies","remoteValidation","jsonrpc","celestrak-services","satnet-services","broadcaster","groundstation-models","x-groundstation-models","ui-map-controllers","ui-modalsc-controllers","ui-modalgs-controllers"]);angular.module("celestrak-services");angular.module("satnet-services");angular.module("broadcaster");angular.module("groundstation-models");angular.module("x-groundstation-models");angular.module("ui-map-controllers");angular.module("ui-modalsc-controllers");angular.module("ui-modalgs-controllers");app.config(function(a){a.decorator("$log",function(b){var c=null;return{setScope:function(d){c=d},log:function(){b.log.apply(null,["[log] "+arguments[0]]);c.$broadcast("logEvent",arguments[0])},info:function(){b.info.apply(null,["[info] "+arguments[0]]);c.$broadcast("infoEvent",arguments[0])},error:function(){b.error.apply(null,["[error] "+arguments[0]]);c.$broadcast("errEvent",arguments[0])},warn:function(){b.warn.apply(null,["[warn] "+arguments[0]]);c.$broadcast("warnEvent",arguments[0])}}})});app.run(["$rootScope","$log","$http","$cookies","leafletData",function(b,d,e,c,a){d.setScope(b);e.defaults.headers.post["X-CSRFToken"]=c.csrftoken;a.getMap().then(function(f){b._map=f})}]);app.controller("NotificationAreaController",["$scope","$filter",function(a,b){a.eventLog=[];a._logEvent=function(d,c){a.eventLog.unshift({type:d.name,timestamp:b("date")(new Date(),TIMESTAMP_FORMAT),msg:c})};a.$on("logEvent",function(d,c){a._logEvent(d,c)});a.$on("infoEvent",function(d,c){a._logEvent(d,c)});a.$on("warnEvent",function(d,c){a._logEvent(d,c)});a.$on("errEvent",function(d,c){a._logEvent(d,c)})}]);